<!doctype HTML>
<html>
<head>
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js" integrity="sha512-6+YN/9o9BWrk6wSfGxQGpt3EUK6XeHi6yeHV+TYD2GR0Sj/cggRpXr1BrAQf0as6XslxomMUxXp2vIl+fv0QRA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>
<a-scene embedded arjs='sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3; debugUIEnabled: false;'>
    <a-assets>
        <img src="./assets/drums.png" id="drums"/>
        <img src="./assets/guitar.png" id="guitar"/>
        <img src="./assets/mic.png" id="mic"/>
        <img src="./assets/piano.png" id="piano"/>
    </a-assets>

    <a-marker
            type="barcode"
            value="0"
            id="drums-marker"
    >
        <a-image src="#drums"/>
    </a-marker>

    <a-marker
            type="barcode"
            value="1"
            id="guitar-marker"
    >
        <a-image src="#guitar"/>
    </a-marker>

    <a-marker
            type="barcode"
            value="2"
            id="mic-marker"
    >
        <a-image src="#mic"/>
    </a-marker>

    <a-marker
            type="barcode"
            value="3"
            id="piano-marker"
    >
        <a-image src="#piano"/>
    </a-marker>

    <a-entity camera></a-entity>
</a-scene>

<script>
    var guitar = new Howl({
        src: ['./audio/guitar.mp3']
    });

    var drums = new Howl({
        src: ['./audio/drums.mp3']
    });

    var mic = new Howl({
        src: ['./audio/mic.mp3']
    });

    var piano = new Howl({
        src: ['./audio/piano.mp3']
    });

    guitar.play();
    drums.play();
    mic.play();
    piano.play();

    window.onload = function() {
        const guitarMarker = document.getElementById('guitar-marker');

        guitarMarker.addEventListener('markerFound', function() {
            // play the guitar instrument
            guitar.mute(false);
        });

        guitarMarker.addEventListener('markerLost', function() {
            // stop the guitar instrument
            guitar.mute(true);
        });

        const pianoMarker = document.getElementById('piano-marker');

        pianoMarker.addEventListener('markerFound', function() {
            piano.mute(false);
        });

        pianoMarker.addEventListener('markerLost', function() {
            piano.mute(true);
        });

        const drumsMarker = document.getElementById('drums-marker');

        drumsMarker.addEventListener('markerFound', function() {
            drums.mute(false);
        });

        drumsMarker.addEventListener('markerLost', function() {
            drums.mute(true);
        });

        const micMarker = document.getElementById('mic-marker');

        micMarker.addEventListener('markerFound', function() {
            mic.mute(false);
        });

        micMarker.addEventListener('markerLost', function() {
            mic.mute(true);
        });
    }

</script>

</body>
</html>